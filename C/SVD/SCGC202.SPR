*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є 17/04/2015            SCGC202.SPR              10:16:38 є
*       є                                                         є
*       ЗДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД¶
*       є                                                         є
*       є Author's Name                                           є
*       є                                                         є
*       є Copyright (c) 2015 Company Name                         є
*       є Address                                                 є
*       є City,     Zip                                           є
*       є                                                         є
*       є Description:                                            є
*       є This program was automatically generated by GENSCRN.    є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є          SCGC202/MS-DOS Setup Code - SECTION 1          є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1
*~ WIZARDSCREEN
*---------------------------------------------------------------------*
* ARQUIVOS UTILIZADOS :                                               *
*              - ORCAMENT
*              - ORCATMP
*              - NOTA
*			   - DUPLICAT	
*			   - SALDO
*			   - ITEMMOV
*			   - ITMANEXO
*			   - usuario
* OBJETIVOS : VENDAS
*	
*---------------------------------------------------------------------*
******>>>> INICIO CONTROLE AMBIENTAL
#DEFINE C_DELREC		'Apagar Registro Selecionado ?'
ON KEY LABEL ESCAPE
m.wzalias	=	SELECT()
m.isediting	=	.F.
m.isadding	=	.F.
m.isreading =   .F.
m.is2table 	= 	.F.
wp_flgfecha = 	.F. 		&& defaut nao fechamento da secao
WP_RECORD 	= 	0
wp_ref_local =  .T.     &&   POSSUI CONTROLE DE REFRESH LOCAL


PRIVATE 	m.ver
m.ver = 2
********>>>>>> INTERESE LOCAL
PRIVATE   wl_cota, iscancela
DIMENSION VTLservfx[9] && Serv. comissionados fixos
STORE 0 TO VTLservfx

wl_cota     = .f.
iscancela   = .f.
isediprz    = .t.     && Permite ou nao a edicao dos prasos
isitens     = .f.     && indica se houve edicao doas itens durante ed. orca.

******>>>> INICIO CONTROLE ARQUIVOS

*>> parametros repassados a btn_val

VLleitura = "STR(wp_empresa,3)"
                         * repassa chave de leitura p/ btn_val
VLlerfim  = "STR(wp_empresa+1,3)"
           * repassa chave de leitura p/ btn_val (POSICAO FINAL + 1 REG)

VLcompara = "nota.empresa = wp_empresa"
                         * repassa chave de comparacao p/ btn_val
VLchvlimi = "STR(wp_empresa,3)"
**

PRIVATE LSTelaAtiva

LSTelaAtiva = "SCGC202"



#REGION 0
REGIONAL m.currarea, m.talkstat, m.compstat

IF SET("TALK") = "ON"
	SET TALK OFF
	m.talkstat = "ON"
ELSE
	m.talkstat = "OFF"
ENDIF
m.compstat = SET("COMPATIBLE")
SET COMPATIBLE FOXPLUS

*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є                MS-DOS Window definitions                є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

IF NOT WEXIST("scgc202") ;
	OR UPPER(WTITLE("SCGC202")) == "SCGC202.PJX" ;
	OR UPPER(WTITLE("SCGC202")) == "SCGC202.SCX" ;
	OR UPPER(WTITLE("SCGC202")) == "SCGC202.MNX" ;
	OR UPPER(WTITLE("SCGC202")) == "SCGC202.PRG" ;
	OR UPPER(WTITLE("SCGC202")) == "SCGC202.FRX" ;
	OR UPPER(WTITLE("SCGC202")) == "SCGC202.QPR"
	DEFINE WINDOW scgc202 ;
		FROM 2, 1 ;
		TO 21,78 ;
		TITLE "[ NOTAS FISCAIS EMITIDAS ]" ;
		FOOTER "[202]" ;
		FLOAT ;
		NOCLOSE ;
		NOMINIMIZE ;
		NONE ;
		COLOR SCHEME 1
ENDIF

IF NOT WEXIST("scgc202a") ;
	OR UPPER(WTITLE("SCGC202A")) == "SCGC202A.PJX" ;
	OR UPPER(WTITLE("SCGC202A")) == "SCGC202A.SCX" ;
	OR UPPER(WTITLE("SCGC202A")) == "SCGC202A.MNX" ;
	OR UPPER(WTITLE("SCGC202A")) == "SCGC202A.PRG" ;
	OR UPPER(WTITLE("SCGC202A")) == "SCGC202A.FRX" ;
	OR UPPER(WTITLE("SCGC202A")) == "SCGC202A.QPR"
	DEFINE WINDOW scgc202a ;
		FROM 0, 0 ;
		TO 1,79 ;
		FOOTER "[202A]" ;
		FLOAT ;
		NOCLOSE ;
		NOMINIMIZE ;
		NONE ;
		COLOR SCHEME 1
ENDIF

IF NOT WEXIST("scgc202b") ;
	OR UPPER(WTITLE("SCGC202B")) == "SCGC202B.PJX" ;
	OR UPPER(WTITLE("SCGC202B")) == "SCGC202B.SCX" ;
	OR UPPER(WTITLE("SCGC202B")) == "SCGC202B.MNX" ;
	OR UPPER(WTITLE("SCGC202B")) == "SCGC202B.PRG" ;
	OR UPPER(WTITLE("SCGC202B")) == "SCGC202B.FRX" ;
	OR UPPER(WTITLE("SCGC202B")) == "SCGC202B.QPR"
	DEFINE WINDOW scgc202b ;
		FROM 2, 0 ;
		TO 21,79 ;
		TITLE "[ Cadastro de Clientes ]" ;
		FOOTER "[202b]" ;
		FLOAT ;
		NOCLOSE ;
		NOMINIMIZE ;
		NONE ;
		COLOR SCHEME 1
ENDIF

IF NOT WEXIST("scgc202c") ;
	OR UPPER(WTITLE("SCGC202C")) == "SCGC202C.PJX" ;
	OR UPPER(WTITLE("SCGC202C")) == "SCGC202C.SCX" ;
	OR UPPER(WTITLE("SCGC202C")) == "SCGC202C.MNX" ;
	OR UPPER(WTITLE("SCGC202C")) == "SCGC202C.PRG" ;
	OR UPPER(WTITLE("SCGC202C")) == "SCGC202C.FRX" ;
	OR UPPER(WTITLE("SCGC202C")) == "SCGC202C.QPR"
	DEFINE WINDOW scgc202c ;
		FROM 2, 0 ;
		TO 21,79 ;
		TITLE "[ REFERENCIA ]" ;
		FOOTER "[202C]" ;
		FLOAT ;
		NOCLOSE ;
		NOMINIMIZE ;
		NONE ;
		COLOR SCHEME 1
ENDIF

IF NOT WEXIST("navega") ;
	OR UPPER(WTITLE("NAVEGA")) == "NAVEGA.PJX" ;
	OR UPPER(WTITLE("NAVEGA")) == "NAVEGA.SCX" ;
	OR UPPER(WTITLE("NAVEGA")) == "NAVEGA.MNX" ;
	OR UPPER(WTITLE("NAVEGA")) == "NAVEGA.PRG" ;
	OR UPPER(WTITLE("NAVEGA")) == "NAVEGA.FRX" ;
	OR UPPER(WTITLE("NAVEGA")) == "NAVEGA.QPR"
	DEFINE WINDOW navega ;
		FROM 22, 0 ;
		TO 24,79 ;
		FLOAT ;
		NOCLOSE ;
		NOMINIMIZE ;
		NONE ;
		COLOR SCHEME 1
ENDIF


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є          SCGC202/MS-DOS Setup Code - SECTION 2          є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1
******>>>> INICIO CONTROLE LOCAL
DO CASE
	CASE !wp_flgfecha
		select nota
		set order to  tag data
		SCATTER MEMVAR MEMO
		*-------------------------> criado pelo wizard
		m.wzalias=SELECT()
		m.isreadonly=IIF(ISREAD(),.T.,.F.)
		IF m.isreadonly
			WAIT WINDOW C_READONLY TIMEOUT 1
		ENDIF
		KEYBOARD "I"
		ON KEY LABEL CTRL-I DO ULitens
ENDCASE


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є              SCGC202/MS-DOS Screen Layout               є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1
IF WVISIBLE("scgc202")
	ACTIVATE WINDOW scgc202 SAME
ELSE
	ACTIVATE WINDOW scgc202 NOSHOW
ENDIF
@ 10,1 TO 10,76
@ 2,26 SAY "-" ;
	SIZE 1,1, 0
@ 2,9 SAY "Ope.:" ;
	SIZE 1,5, 0
@ 14,32 SAY "%" ;
	SIZE 1,1, 0
@ 14,34 SAY "=>" ;
	SIZE 1,2, 0
@ 11,32 SAY "%" ;
	SIZE 1,1, 0
@ 11,34 SAY "=>" ;
	SIZE 1,2, 0
@ 14,1 SAY "ISS......:" ;
	SIZE 1,10, 0
@ 19,52 TO 19,76
@ 19,51 SAY "Д" ;
	SIZE 1,1, 0
@ 18,50 SAY "ї" ;
	SIZE 1,1, 0
@ 4,1 TO 4,76
@ 11,50 TO 18,50
@ 10,50 SAY "В" ;
	SIZE 1,1, 0
@ 2,16 SAY "NF:" ;
	SIZE 1,3, 0
@ 2,54 SAY "[Ref:" ;
	SIZE 1,5, 0
@ 2,66 SAY "]" ;
	SIZE 1,1, 0
@ 5,26 SAY "-" ;
	SIZE 1,1, 0
@ 2,1 SAY "Fil:" ;
	SIZE 1,4, 0
@ 0,0 TO 19,77 ;
	COLOR SCHEME 23
@ 19,1 TO 19,76 ;
	COLOR SCHEME 24
@ 19,77 SAY "Щ" ;
	SIZE 1,1, 0 ;
	COLOR SCHEME 24
@ 1,77 TO 18,77 ;
	COLOR SCHEME 24
@ 0,77 SAY "ї" ;
	SIZE 1,1, 0 ;
	COLOR SCHEME 24
@ 18,32 SAY "Nro Cupom:" ;
	SIZE 1,10, 0
@ 11,1 SAY "Base ICMS:" ;
	SIZE 1,10, 0
@ 12,1 SAY "Isentas..:" ;
	SIZE 1,10, 0
@ 12,26 SAY "Outras....:" ;
	SIZE 1,11, 0
@ 13,51 SAY "Outras.Dsp:" ;
	SIZE 1,11, 0
@ 14,51 SAY "IPI.......:" ;
	SIZE 1,11, 0
@ 12,51 SAY "Seguro....:" ;
	SIZE 1,11, 0
@ 11,51 SAY "Frete.....:" ;
	SIZE 1,11, 0
@ 13,1 SAY "Base IPI.:" ;
	SIZE 1,10, 0
@ 15,1 SAY "Base Subs:" ;
	SIZE 1,10, 0
@ 13,25 SAY "----------------------->" ;
	SIZE 1,24, 0
@ 15,25 SAY "----------------------->" ;
	SIZE 1,24, 0
@ 6,11 SAY "UF:" ;
	SIZE 1,3, 0
@ 6,17 SAY "Mun." ;
	SIZE 1,4, 0
@ 6,38 SAY "IBGE" ;
	SIZE 1,4, 0
@ 15,51 SAY "Subst.....:" ;
	SIZE 1,11, 0
@ 16,51 SAY "Servicos..:" ;
	SIZE 1,11, 0
@ 17,51 SAY "Produtos..:" ;
	SIZE 1,11, 0
@ 18,51 SAY "TOTAL NF ==>" ;
	SIZE 1,12, 0
@ 8,3 SAY "Chv NFe:" ;
	SIZE 1,8, 0
@ 9,3 SAY "Stt.Nfe:" ;
	SIZE 1,8, 0
@ 9,27 SAY "Rcb.Nfe" ;
	SIZE 1,7, 0
@ 9,52 SAY "Prtclo:" ;
	SIZE 1,7, 0
@ 5,3 SAY "CPF/CNPJ:" ;
	SIZE 1,9, 0
@ 0,11 GET m.ver ;
	PICTURE "@*RHN \<X-Numerica;\<W-Data;\<G-Nome" ;
	SIZE 1,14,7 ;
	DEFAULT 1 ;
	WHEN !ISEDITING AND !isreading ;
	VALID _4bw0m0zzo()
@ 2,5 GET m.empresa ;
	SIZE 1,3 ;
	DEFAULT 0 ;
	PICTURE "999" ;
	WHEN _4bw0m0zzp()
@ 2,14 GET m.operacao ;
	SIZE 1,1 ;
	DEFAULT " " ;
	WHEN _4bw0m0zzq()
@ 2,19 GET m.nota ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999999" ;
	WHEN _4bw0m0zzr() ;
	VALID _4bw0m0zzs()
@ 2,27 GET nota.serie ;
	SIZE 1,1 ;
	DEFAULT " " ;
	WHEN (m.isadding OR m.isreading)
@ 2,29 GET m.data ;
	SIZE 1,10 ;
	DEFAULT {  /  /  } ;
	WHEN (m.isadding OR m.isreading) ;
	VALID _4bw0m0zzt()
@ 2,40 GET m.hora ;
	SIZE 1,8 ;
	DEFAULT " " ;
	WHEN isediting
@ 2,49 GET m.tipo ;
	SIZE 1,4 ;
	DEFAULT " " ;
	WHEN isediting
@ 2,59 GET m.referencia ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999999" ;
	WHEN isediting
@ 2,68 GET m.status ;
	PICTURE "@*RVN Norm;Canc " ;
	SIZE 1,9,0 ;
	DEFAULT 1 ;
	WHEN .f.
@ 5,12 GET m.favorecido ;
	SIZE 1,14 ;
	DEFAULT 0 ;
	PICTURE "99999999999999" ;
	WHEN isediting
@ 5,27 GET m.nome ;
	SIZE 1,30 ;
	DEFAULT " " ;
	WHEN isediting OR isreading ;
	VALID _4bw0m0zzu()
@ 6,14 GET m.uf ;
	SIZE 1,2 ;
	DEFAULT " " ;
	WHEN isediting ;
	VALID _4bw0m0zzv()
@ 6,21 GET m.cidade ;
	SIZE 1,16 ;
	DEFAULT " " ;
	PICTURE "@S30" ;
	WHEN isediting ;
	VALID _4bw0m1013()
@ 6,44 GET m.muni_ibge ;
	SIZE 1,11 ;
	DEFAULT 0 ;
	WHEN .f.
@ 11,12 GET m.base_icms ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 11,26 GET m.aliq_icms ;
	SIZE 1,5 ;
	DEFAULT " " ;
	WHEN isediting
@ 11,37 GET m.vlr_icms ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 12,12 GET m.base_isent ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 12,37 GET m.base_OUTR ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 13,12 GET m.base_IPI ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 14,12 GET m.base_iss ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 14,26 GET m.aliq_iss ;
	SIZE 1,5 ;
	DEFAULT " " ;
	WHEN isediting
@ 14,37 GET m.vlr_iss ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 15,12 GET m.base_subs ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 11,64 GET m.vlrfrete ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 12,64 GET m.vlrseguro ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 13,64 GET m.vlrdespes ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 14,64 GET m.vlr_ipi ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 15,64 GET m.icms_subs ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 16,64 GET m.totservico ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 17,64 GET m.totproduto ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 18,64 GET m.total_nota ;
	SIZE 1,12 ;
	DEFAULT 0 ;
	PICTURE "@Z 9,999,999.99" ;
	WHEN isediting
@ 18,43 GET m.cupom ;
	SIZE 1,6 ;
	DEFAULT 0 ;
	PICTURE "9999999" ;
	WHEN isediting
@ 8,11 GET m.nfe_chv ;
	SIZE 1,43 ;
	DEFAULT 0 ;
	PICTURE "@S44" ;
	WHEN isediting AND lMaster
@ 9,35 GET m.nfe_recibo ;
	SIZE 1,15 ;
	DEFAULT " " ;
	WHEN isediting AND lMaster
@ 9,11 GET m.nfe_status ;
	SIZE 1,15 ;
	DEFAULT " " ;
	WHEN isediting AND lMaster
@ 9,60 GET m.nfe_protoc ;
	SIZE 1,15 ;
	DEFAULT " " ;
	WHEN isediting AND lMaster
@ 19,12 GET item_btn ;
	PICTURE "@*HN ite\<Ns" ;
	SIZE 1,7,1 ;
	DEFAULT 1 ;
	WHEN !ISEDITING AND !isreading ;
	VALID _4bw0m1014()
@ 7,1 TO 7,76
@ 3,59 GET m.rps ;
	SIZE 1,7 ;
	DEFAULT 0 ;
	PICTURE "9999999" ;
	WHEN .f.
@ 3,54 SAY "[RPS:" ;
	SIZE 1,5, 0
@ 3,66 SAY "]" ;
	SIZE 1,1, 0




*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є              SCGC202A/MS-DOS Screen Layout              є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 2
IF WVISIBLE("scgc202a")
	ACTIVATE WINDOW scgc202a SAME
ELSE
	ACTIVATE WINDOW scgc202a NOSHOW
ENDIF
@ 1,0 SAY "/" ;
	SIZE 1,1, 0
@ 1,1 GET SCGC200 ;
	PICTURE "@*HN \<1-Capa" ;
	SIZE 1,11,1 ;
	DEFAULT 1 ;
	WHEN _4bw0m1015() ;
	VALID _4bw0m1016()
@ 1,13 SAY "\" ;
	SIZE 1,1, 0
@ 1,15 GET SCGC200B ;
	PICTURE "@*HN \<2-Complemento" ;
	SIZE 1,15,1 ;
	DEFAULT 1 ;
	WHEN _4bw0m1017() ;
	VALID _4bw0m1018()
@ 1,30 SAY "\" ;
	SIZE 1,1, 0
@ 1,14 SAY "/" ;
	SIZE 1,1, 0
@ 0,1 SAY "____________" ;
	SIZE 1,12, 0
@ 0,15 SAY "_______________" ;
	SIZE 1,15, 0
@ 1,33 GET SCGC200C ;
	PICTURE "@*HN \<7-Referencia" ;
	SIZE 1,15,1 ;
	DEFAULT 1 ;
	WHEN _4bw0m1019() ;
	VALID _4bw0m101a()
@ 1,48 SAY "\" ;
	SIZE 1,1, 0
@ 1,32 SAY "/" ;
	SIZE 1,1, 0
@ 0,33 SAY "_______________" ;
	SIZE 1,15, 0




*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є              SCGC202B/MS-DOS Screen Layout              є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 3
IF WVISIBLE("scgc202b")
	ACTIVATE WINDOW scgc202b SAME
ELSE
	ACTIVATE WINDOW scgc202b NOSHOW
ENDIF
@ 1,56 SAY "In.e" ;
	SIZE 1,4, 0
@ 1,33 SAY "In.s" ;
	SIZE 1,4, 0
@ 3,26 SAY "-" ;
	SIZE 1,1, 0
@ 4,13 SAY "-" ;
	SIZE 1,1, 0
@ 1,23 SAY "CFO" ;
	SIZE 1,3, 0
@ 5,50 SAY "UF:" ;
	SIZE 1,3, 0
@ 6,33 SAY "IBGE" ;
	SIZE 1,4, 0
@ 11,1 SAY "[ TRANSPORTE ]" ;
	SIZE 1,14, 0
@ 12,41 SAY "Plc:" ;
	SIZE 1,4, 0
@ 4,27 SAY "IE:" ;
	SIZE 1,3, 0
@ 8,32 SAY "FONE:" ;
	SIZE 1,5, 0
@ 13,1 SAY "[ INFORMACOES ADICIONAIS ]" ;
	SIZE 1,26, 0
@ 2,1 SAY "[ IDENTIFICACAO ]" ;
	SIZE 1,17, 0
@ 17,41 SAY "-" ;
	SIZE 1,1, 0
@ 17,21 SAY "-" ;
	SIZE 1,1, 0
@ 17,12 SAY "Atdt:" ;
	SIZE 1,5, 0
@ 17,32 SAY "Lbrd:" ;
	SIZE 1,5, 0
@ 0,0 TO 19,77 ;
	COLOR SCHEME 23
@ 10,2 SAY "email.NFe:" ;
	SIZE 1,10, 0
@ 9,2 SAY "email....:" ;
	SIZE 1,10, 0
@ 8,2 SAY "CEP......:" ;
	SIZE 1,10, 0
@ 7,2 SAY "Bairro...:" ;
	SIZE 1,10, 0
@ 6,2 SAY "Cidade...:" ;
	SIZE 1,10, 0
@ 5,2 SAY "Endereco.:" ;
	SIZE 1,10, 0
@ 4,2 SAY "Natureza.:" ;
	SIZE 1,10, 0
@ 3,2 SAY "CPF/CNPJ.:" ;
	SIZE 1,10, 0
@ 1,2 GET m.natureza ;
	SIZE 1,20 ;
	DEFAULT " " ;
	WHEN isediting
@ 1,26 GET m.cfo ;
	SIZE 1,6 ;
	DEFAULT " " ;
	WHEN isediting
@ 1,37 GET m.inscsubst ;
	SIZE 1,18 ;
	DEFAULT " " ;
	WHEN isediting
@ 1,60 GET m.insc_emit ;
	SIZE 1,18 ;
	DEFAULT " " ;
	WHEN isediting
@ 3,12 GET m.favorecido ;
	SIZE 1,14 ;
	DEFAULT 0 ;
	PICTURE "99999999999999" ;
	WHEN isediting
@ 3,27 GET m.nome ;
	SIZE 1,49 ;
	DEFAULT " " ;
	WHEN isediting OR isreading ;
	VALID _4bw0m102n()
@ 4,12 GET m.natu_cli ;
	SIZE 1,1 ;
	DEFAULT 0 ;
	PICTURE "9" ;
	WHEN isediting ;
	VALID _4bw0m102o() ;
	ERROR "S => Sim  //  N => Nao "
@ 4,14 GET m.nome_natu ;
	SIZE 1,12 ;
	DEFAULT " " ;
	WHEN .f.
@ 4,30 GET m.inscricao ;
	SIZE 1,18 ;
	DEFAULT " " ;
	WHEN isediting
@ 5,12 GET m.endereco ;
	SIZE 1,37 ;
	DEFAULT " " ;
	WHEN isediting
@ 5,53 GET m.uf ;
	SIZE 1,2 ;
	DEFAULT " " ;
	WHEN isediting ;
	VALID _4bw0m102p()
@ 6,12 GET m.cidade ;
	SIZE 1,16 ;
	DEFAULT " " ;
	PICTURE "@S30" ;
	WHEN isediting ;
	VALID _4bw0m102q()
@ 6,37 GET m.muni_ibge ;
	SIZE 1,11 ;
	DEFAULT 0 ;
	WHEN .f.
@ 7,12 GET m.bairro ;
	SIZE 1,15 ;
	DEFAULT " " ;
	PICTURE "@S30" ;
	WHEN isediting ;
	VALID _4bw0m102r()
@ 8,12 GET m.cep ;
	SIZE 1,9 ;
	DEFAULT 0 ;
	PICTURE "@R 99999-999" ;
	WHEN isediting ;
	VALID _4bw0m102s()
@ 8,37 GET m.FONE ;
	SIZE 1,10 ;
	DEFAULT " " ;
	WHEN isediting
@ 9,12 GET m.e_mail ;
	SIZE 1,60 ;
	DEFAULT " " ;
	WHEN isediting
@ 10,12 GET m.e_mail_nfe ;
	SIZE 1,60 ;
	DEFAULT " " ;
	WHEN isediting
@ 12,9 GET m.transp ;
	SIZE 1,14 ;
	DEFAULT 0 ;
	WHEN isediting
@ 12,24 GET m.nom_transp ;
	SIZE 1,16 ;
	DEFAULT " " ;
	WHEN isediting
@ 12,46 GET m.placa_tran ;
	SIZE 1,8 ;
	DEFAULT " " ;
	WHEN isediting
@ 12,55 GET m.uf_tran ;
	SIZE 1,2 ;
	DEFAULT " " ;
	WHEN isediting
@ 14,9 GET m.citacao ;
	SIZE 1,49 ;
	DEFAULT " " ;
	WHEN isediting
@ 15,9 GET m.citacao1 ;
	SIZE 1,49 ;
	DEFAULT " " ;
	WHEN isediting
@ 16,9 GET m.citacao3 ;
	SIZE 1,49 ;
	DEFAULT " " ;
	WHEN isediting
@ 17,17 GET m.operador ;
	SIZE 1,4 ;
	DEFAULT 0 ;
	PICTURE "9999" ;
	WHEN isediting ;
	VALID _4bw0m102t() ;
	ERROR wp_msg
@ 17,22 GET m.nomevend ;
	SIZE 1,9 ;
	DEFAULT " " ;
	WHEN .f.
@ 17,37 GET m.usr_libera ;
	SIZE 1,4 ;
	DEFAULT 0 ;
	PICTURE "9999" ;
	WHEN isediting ;
	VALID _4bw0m102u() ;
	ERROR wp_msg
@ 17,42 GET m.nomeusr ;
	SIZE 1,9 ;
	DEFAULT " " ;
	WHEN .f.
@ 18,1 GET dup_btn ;
	PICTURE "@*HN \<3-Dup" ;
	SIZE 1,7,1 ;
	DEFAULT 1 ;
	WHEN !ISEDITING AND !isreading ;
	VALID _4bw0m102v() ;
	MESSAGE 'Duplicatas Referente a Nota.'
@ 18,9 GET refer_btn ;
	PICTURE "@*HN \<4-Refer." ;
	SIZE 1,10,1 ;
	DEFAULT 1 ;
	WHEN !ISEDITING AND !isreading ;
	VALID _4bw0m1046() ;
	MESSAGE 'Duplicatas Referente a Nota.'
@ 18,20 GET blt_btn ;
	PICTURE "@*HN \<5-Blto" ;
	SIZE 1,8,1 ;
	DEFAULT 1 ;
	WHEN !ISEDITING AND !isreading ;
	VALID _4bw0m1047() ;
	MESSAGE 'Duplicatas Referente a Nota.'
@ 18,29 GET prtcpsrvc ;
	PICTURE "@*HN \<6-Prt Cop Servico" ;
	SIZE 1,19,1 ;
	DEFAULT 1 ;
	WHEN !ISEDITING AND !isreading ;
	VALID _4bw0m1048() ;
	MESSAGE 'Duplicatas Referente a Nota.'
@ 18,49 GET m.ReenvDFis ;
	PICTURE "@*HN \<8-Envia DFis (EFD-SPED)" ;
	SIZE 1,25,1 ;
	DEFAULT 1 ;
	WHEN !ISEDITING AND !isreading ;
	VALID _4bw0m1049()
@ 19,49 GET m.geradupl ;
	PICTURE "@*HN \<9-Gera Dupl" ;
	SIZE 1,25,1 ;
	DEFAULT 1 ;
	WHEN !ISEDITING AND !isreading ;
	VALID _4bw0m104a()




*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є              SCGC202C/MS-DOS Screen Layout              є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 4
IF WVISIBLE("scgc202c")
	ACTIVATE WINDOW scgc202c SAME
ELSE
	ACTIVATE WINDOW scgc202c NOSHOW
ENDIF
@ 0,0 TO 19,77 ;
	COLOR SCHEME 23
@ 8,12 SAY "...- Numero do documento referenciado" ;
	SIZE 1,37, 0
@ 9,6 SAY ".........- Serie do Doc. Referenciado" ;
	SIZE 1,37, 0
@ 10,6 SAY ".........- Modelo do Doc. Referenciado" ;
	SIZE 1,38, 0
@ 11,13 SAY "..- Data do docuemnto Referenciado" ;
	SIZE 1,34, 0
@ 13,3 SAY "[Chave de Acesso dodocuemnto Referenciado]" ;
	SIZE 1,42, 0
@ 3,4 SAY "...........- (1)NFe Normal (2)NFe Complemento (3)NFe Ajuste (4)Devolucao" ;
	SIZE 1,72, 0
@ 6,4 SAY "...........- (0)Emissao Propria  (1)Emitido por Terceiro " ;
	SIZE 1,57, 0
@ 7,4 SAY "...........- (0)Entrada          (1)Saida" ;
	SIZE 1,41, 0
@ 3,3 GET M.FNLDAD_NFE ;
	SIZE 1,1 ;
	DEFAULT " " ;
	PICTURE "9" ;
	WHEN isediting ;
	ERROR wp_msg	
@ 6,3 GET m.RFEMITENTE ;
	SIZE 1,1 ;
	DEFAULT " " ;
	PICTURE "9" ;
	WHEN isediting ;
	ERROR wp_msg	
@ 7,3 GET m.RFOPERACAO ;
	SIZE 1,1 ;
	DEFAULT " " ;
	PICTURE "9" ;
	WHEN isediting ;
	ERROR wp_msg	
@ 8,3 GET m.RFDOCUMENT ;
	SIZE 1,9 ;
	DEFAULT " " ;
	PICTURE "9999999" ;
	WHEN isediting ;
	ERROR wp_msg	
@ 9,3 GET m.RFSERIE ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "999" ;
	WHEN isediting ;
	ERROR wp_msg	
@ 10,3 GET m.RFMOD_DOC ;
	SIZE 1,2 ;
	DEFAULT " " ;
	WHEN isediting ;
	ERROR wp_msg	
@ 11,3 GET  m.RFDT_DOC ;
	SIZE 1,10 ;
	DEFAULT {  /  /  } ;
	WHEN isediting ;
	ERROR wp_msg	
@ 14,3 GET m.RFCHVACESS ;
	SIZE 1,45 ;
	DEFAULT " " ;
	WHEN isediting ;
	ERROR wp_msg	




*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є              OBJ_WNAV/MS-DOS Screen Layout              є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 5
IF WVISIBLE("navega")
	ACTIVATE WINDOW navega SAME
ELSE
	ACTIVATE WINDOW navega NOSHOW
ENDIF
@ 1,8 GET m.top_btn ;
	PICTURE "@*HN \<Inicio" ;
	SIZE 1,8,1 ;
	DEFAULT 1 ;
	VALID BTN_VAL1('TOP', VLleitura, Vlcompara) ;
	MESSAGE 'Primeiro registro'
@ 1,16 GET m.prev_btn ;
	PICTURE "@*HN \<Ant" ;
	SIZE 1,5,1 ;
	DEFAULT 1 ;
	VALID btn_val1('PREV', VLleitura, Vlcompara) ;
	MESSAGE 'Posiciona no registro anterior.' 	
@ 1,21 GET m.next_btn ;
	PICTURE "@*HN \<Proximo" ;
	SIZE 1,9,1 ;
	DEFAULT 1 ;
	VALID btn_val1('NEXT', VLleitura, Vlcompara) ;
	MESSAGE 'Avanca para proximo registro'
@ 1,30 GET m.end_btn ;
	PICTURE "@*HN \<Fim" ;
	SIZE 1,5,1 ;
	DEFAULT 1 ;
	VALID btn_val1('END', VLlerfim, Vlcompara) ;
	MESSAGE 'Ultimo registro do arquivo' 																																													
@ 1,35 GET m.loc_btn ;
	PICTURE "@*HN \<Zoom" ;
	SIZE 1,6,1 ;
	DEFAULT 1 ;
	VALID btn_val1('LOCATE', VLleitura, Vlcompara,VLchvlimi)		 ;
	MESSAGE 'Permite consulta visual ampliada a varios registros na tela'
@ 1,41 GET m.add_btn ;
	PICTURE "@*HN \<Lanca" ;
	SIZE 1,7,1 ;
	DEFAULT 1 ;
	VALID btn_val1('ADD') ;
	MESSAGE 'Abre novo registro para lancamento de dados' 
@ 1,55 GET m.edit_btn ;
	PICTURE "@*HN \<Edit" ;
	SIZE 1,6,1 ;
	DEFAULT 1 ;
	VALID btn_val1('EDIT') ;
	MESSAGE 'Permite a alteracao de dados do registro corrente'
@ 1,61 GET m.del_btn ;
	PICTURE "@*HN \<Del" ;
	SIZE 1,5,1 ;
	DEFAULT 1 ;
	VALID btn_val1('DELETE', VLleitura, Vlcompara) ;
	MESSAGE 'Delete current record.'
@ 1,73 GET m.exit_btn ;
	PICTURE "@*HN \<Sair" ;
	SIZE 1,6,1 ;
	DEFAULT 1 ;
	VALID btn_val1('EXIT') ;
	MESSAGE 'Close screen.'
@ 1,48 GET m.cop_btn ;
	PICTURE "@*HN \<Copia" ;
	SIZE 1,7,1 ;
	DEFAULT 1 ;
	VALID btn_val1('COPY') ;
	MESSAGE 'Abre novo registro sel limpar os dados do reg corrente' 
@ 1,1 GET m.busca_btn ;
	PICTURE "@*HN \<Busca" ;
	SIZE 1,7,1 ;
	DEFAULT 1 ;
	VALID BTN_VAL1('BUSCA') ;
	MESSAGE 'Busca dirata pela chave do documento.'
@ 1,66 GET m.imp_btn ;
	PICTURE "@*HN i\<Mpr" ;
	SIZE 1,6,1 ;
	DEFAULT 1 ;
	VALID btn_val1('PRINT') ;
	MESSAGE 'Close screen.'
@ 0,0 TO 2,79 DOUBLE ;
	COLOR SCHEME 24
@ 2,1 TO 2,78 DOUBLE ;
	COLOR SCHEME 23
@ 1,79 SAY "і" ;
	SIZE 1,1, 0 ;
	COLOR SCHEME 23
@ 0,79 SAY "»" ;
	SIZE 1,1, 0 ;
	COLOR SCHEME 23
@ 2,79 SAY "ј" ;
	SIZE 1,1, 0 ;
	COLOR SCHEME 23
@ 1,79 SAY "є" ;
	SIZE 1,1, 0 ;
	COLOR SCHEME 23

IF NOT WVISIBLE("navega")
	ACTIVATE WINDOW navega
ENDIF
IF NOT WVISIBLE("scgc202c")
	ACTIVATE WINDOW scgc202c
ENDIF
IF NOT WVISIBLE("scgc202b")
	ACTIVATE WINDOW scgc202b
ENDIF
IF NOT WVISIBLE("scgc202a")
	ACTIVATE WINDOW scgc202a
ENDIF
IF NOT WVISIBLE("scgc202")
	ACTIVATE WINDOW scgc202
ENDIF



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є     MS-DOSREAD contains clauses from SCREEN scgc202     є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

READ CYCLE ;
	VALID READVALID() ;
	WHEN READWHEN() ;
	ACTIVATE READACT() ;
	DEACTIVATE READDEAC() &wp_timeout ;
	NOLOCK

RELEASE WINDOW navega
RELEASE WINDOW scgc202
RELEASE WINDOW scgc202a
RELEASE WINDOW scgc202b
RELEASE WINDOW scgc202c

#REGION 0
IF m.talkstat = "ON"
	SET TALK ON
ENDIF
IF m.compstat = "ON"
	SET COMPATIBLE ON
ENDIF


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є               SCGC202/MS-DOS Cleanup Code               є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1
	ON KEY LABEL ESCAPE
	SET FORMAT TO
	ON KEY LABEL CTRL-I
RETURN
*******************


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є   SCGC202/MS-DOS Supporting Procedures and Functions    є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1
PROCEDURE BTN_VAL1
	PARAMETER tecla, m.chv_ler, m.chv_compara, m.chv_brow
    PRIVATE LNF_registro
	SELE nota

	DO CASE
	  CASE m.ver = 1					&& ordem numerica
		SET ORDER TO TAG nota
	  CASE m.ver = 2					&& ordem data
		SET ORDER TO TAG data
	  CASE m.ver = 3					&& ordem nome
		SET ORDER TO TAG nome
	ENDCASE

	IF tecla = 'COPY'   & cancela nota fiscal
	    LScp1 = STR(nota.nota,7)
		wp_msg = "Confirma Solicitacao de Cancelamento p/ "+LScp1
		IF !fox_alert(wp_msg)
		   SELE nota
	   RETURN
		ENDIF
		wp_msg = 'Informe Seu Codigo e sua Senha p/ CANCELAR..'
		LNusuario = nUsr
		BTMP   =  'usuario.usuario = LNusuario '
		LNusr_ret = 0
		DO obj_prmt.SPR WITH   wp_msg , Btmp
		IF LNusr_ret =  0
		   WAIT WINDOW "Cancelamento nao Efetuado.....<ENTER>"
		   SELE nota
		   RETURN
		ENDIF

	    IF m.nota > 999999  OR nota.cupom > 0		
	    	&& CANCELANDO REGISTRO VINCULADO A CUPOM !!!!!!????
			DO OBJ_ALER.SPR WITH " ATENCAO !!! " +;
				" Voce esta solicitando o cancelamento de um registro " +;
				" de CUPOM. O procedimento correto e cancelar na tela de "+;
				" controle do ECF. (INF. SENHA PARA SEGUIR)"
			wp_msg = 'Usuario MASTER ...(ATENCAO)...'
			BTMP   =  'usuario.master '
			LNusr_ret = 0
			DO obj_prmt.SPR WITH   wp_msg , Btmp
			IF LNusr_ret =  0
				 return(.f.)
			ENDIF
		ENDIF				

		IF MONTH(wp_dtoper) <> MONTH(m.data) OR ;
			YEAR(wp_dtoper) <> YEAR(m.data)
			wp_msg = 'Usuario com Acesso a Outros Meses...'
			BTMP   =  'usuario.outro_mes = "S"'
			LNusr_ret = 0
			DO obj_prmt.SPR WITH   wp_msg , Btmp
			IF LNusr_ret =  0
				 return(.f.)
			ENDIF
		ELSE
			IF wp_dtoper <> m.data
				wp_msg = 'Usuario com Acesso a Outros Dias...'
				BTMP   =  'usuario.retroacao = "S" '
				LNusr_ret = 0
				DO obj_prmt.SPR WITH   wp_msg , Btmp
				IF LNusr_ret =  0
					 return(.f.)
				ENDIF
			ENDIF	
		ENDIF
		*-----------------------------------------------------------*
		SELE nota
		LNF_registo = recno()		
		
		=W_DEFPROC("nota.spr")
		=NFCTRLcancFatura((nota.empresa),(nota.nota),"NORMAL")
		GO LNF_registro
		*-----------------------------------------------------------*
		DO refresh
	ELSE
		IF tecla = 'DELETE' AND !isediting   && APAGANDO NOTA
			IF !fox_alert(C_DELREC)
			   RETURN
 			ENDIF
			IF !UPtransacao("INICIAR")     && INICIA TRANSACAO
			   WAIT WINDOW ;
   "Processo nao pode ser iniciado com seguranca. Tente novamente."
			   SELE nota
			   RETURN
			ENDIF

			SELE nf_anexo
			SET ORDER TO TAG anexo
			SEEK STR(nota.empresa,3)+STR(nota.nota,7)
			IF FOUND()
				KEYBOARD "{S}"
			    DO btn_val with tecla, m.chv_ler, m.chv_compara, m.chv_brow
			ENDIF			
			SELECT nota
			CLEAR TYPEAHEAD
			KEYBOARD "{S}"
		    DO btn_val with tecla, m.chv_ler, m.chv_compara, m.chv_brow
			=UPtransacao("TERMINAR")    && ENCERRAR TRANSACAO
		ELSE

		    DO btn_val with ;
			     tecla, m.chv_ler, m.chv_compara, m.chv_brow,.T.,.F.
		ENDIF
	ENDIF

    IF tecla $ 'ADD/EDIT'
        m.empresa  = wp_empresa
        m.operacao = "S"
		DO ULTESTATELA

       RETURN
    ENDIF






	m.vlr_iss  = ROUND(m.base_iss  * m.aliq_iss / 100,2)
	m.vlr_icms = ROUND(m.base_icms * m.aliq_icms / 100,2)
	SELE USUARIO
	SET ORDER TO TAG usuario
	SEEK m.usr_libera
	m.nomeusr = usuario.nome

	SEEK m.operador
	m.nomevend = usuario.nome

	SELE TAB001
	SEEK 'NTZ'+CHRTRAN(STR(m.natu_cli,1)," ","0")
	m.nome_natu = tab001.descricao
	SHOW GET m.nome_natu

	SHOW GET m.nomevend
	SHOW GET m.nomeusr
	SHOW GET m.vlr_iss
	SHOW GET m.vlr_icms
	SELE nota
RETURN

PROCEDURE ULitens
	ON KEY LABEL CTRL-I
 	DO OBJ_ITNF.SPR
	ON KEY LABEL CTRL-I DO ULitens
RETURN


PROCEDURE  ULTESTATELA
 	  IF LSTelaAtiva = "SCGC202"	
		    SHOW WINDOW NAVEGA    TOP
		    SHOW WINDOW SCGC202A  TOP
		    SHOW WINDOW SCGC202B  TOP
		    SHOW WINDOW SCGC202   TOP
  	  ENDIF

  	  IF LSTelaAtiva = "SCGC202B"	
		    SHOW WINDOW NAVEGA    TOP
		    SHOW WINDOW SCGC202A  TOP
		    SHOW WINDOW SCGC202   TOP
		    SHOW WINDOW SCGC202B  TOP
  	  ENDIF
RETURN

PROCEDURE local_refresh
PARAMETERS wl_branco
      SHOW GET add_btn   DISABLE
	  IF m.status = 1
 		  SHOW GET del_btn   DISABLE
	  ENDIF
  	  SHOW GET cop_btn,1 PROMPT "\<Cancela"

	  IF  m.tipo = "CPM" 		&& IF m.ch_condi <> "2" OR m.tipo = "CPM"
	  	  SHOW GET dup_btn  DISABLE
	  ENDIF	  	

	  IF  m.ch_condi <> "2"
	  	  SHOW GET blt_btn  DISABLE
	  ENDIF	  	

	  IF isediting
	  	  SHOW GET dup_btn  DISABLE
	  	  SHOW GET item_btn  DISABLE
		  SHOW GET refer_btn DISABLE
	  	  SHOW GET blt_btn  DISABLE
	  	  SHOW GET DcFis   DISABLE
	  	  SHOW GET XMLefd   DISABLE
	  	  SHOW GET EnvNFe   DISABLE
	  	  SHOW GET RtrnNFe   DISABLE
		  SHOW GET prtcpsrvc DISABLE
		  SHOW GET m.ReenvDFis DISABLE
		  SHOW GET m.geradupl DISABLE
	  ELSE
	  	  SHOW GET item_btn
	  ENDIF

	  *****>>>>>>>>>>>  abilita os acessos permitidos
	  LNindice = 0
	  LSaces = "   "
	  IF !lMaster
			LNindice = ASCAN(vAcessos,WPprgativo)
			IF LNindice > 0
					LNindice = ASUBSCRIPT(VACESSOS,LNindice,1)
					LSaces = vAcessos(LNindice,2)
			ENDIF
	  ENDIF
	  *********************************
	  IF "E" $ LSaces	
		  SHOW GET edit_btn  DISABLE
	  ENDIF
	  IF "L" $ LSaces	
	      SHOW GET add_btn   DISABLE
	  ENDIF
	  IF "C" $ LSaces
	      SHOW GET cop_btn   DISABLE
	  ENDIF
	  IF m.nota > 999999 AND !lMaster && CUPOM DEVE SER CANCELADO ATRAVES
	  							  	   && DO OBJ_ECF.SPR
	      SHOW GET cop_btn   DISABLE
	  ENDIF
	  IF "D" $ LSaces	
	      SHOW GET del_btn   DISABLE
	  ENDIF
	  IF "0" $ LSaces	
	      SHOW GET dup_btn   DISABLE
	  ENDIF
	  IF "N" $ LSaces	
	      SHOW GET item_btn   DISABLE
	  ENDIF
	  IF "1" $ LSaces	
		  SHOW GET refer_btn DISABLE
	  ENDIF
	
	  DO ULTESTATELA
RETURN




*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M0ZZO           m.ver VALID                        є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   50   є
*       є Variable:            m.ver                              є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Radio Button                       є
*       є Snippet Number:      1                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

FUNCTION _4bw0m0zzo     &&  m.ver VALID
#REGION 1
SELE NOTA

DO CASE
  CASE m.ver = 1					&& ordem numerica
	SET ORDER TO TAG nota
  CASE m.ver = 2					&& ordem data
	SET ORDER TO TAG data
  CASE m.ver = 3					&& ordem nome
	SET ORDER TO TAG nome
ENDCASE
RETURN(.T.)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M0ZZP           m.empresa WHEN                     є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   51   є
*       є Variable:            m.empresa                          є
*       є Called By:           WHEN Clause                        є
*       є Object Type:         Field                              є
*       є Snippet Number:      2                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m0zzp     &&  m.empresa WHEN
#REGION 1
ON KEY LABEL ESCAPE	KEYBOARD "{END}"
IF LASTKEY() = 15
	KEYBOARD "{ESCAPE}"
ENDIF
** RETURN(m.isadding OR m.isreading)

RETURN(m.isadding)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M0ZZQ           m.operacao WHEN                    є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   52   є
*       є Variable:            m.operacao                         є
*       є Called By:           WHEN Clause                        є
*       є Object Type:         Field                              є
*       є Snippet Number:      3                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m0zzq     &&  m.operacao WHEN
#REGION 1
ON KEY LABEL ESCAPE	KEYBOARD "{END}"
IF LASTKEY() = 15
	KEYBOARD "{ESCAPE}"
ENDIF
** RETURN(m.isadding OR m.isreading)

RETURN(m.isadding)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M0ZZR           m.nota WHEN                        є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   53   є
*       є Variable:            m.nota                             є
*       є Called By:           WHEN Clause                        є
*       є Object Type:         Field                              є
*       є Snippet Number:      4                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m0zzr     &&  m.nota WHEN
#REGION 1
ON KEY LABEL ESCAPE KEYBOARD "{BACKTAB}"
RETURN(m.isadding OR m.isreading)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M0ZZS           m.nota VALID                       є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   53   є
*       є Variable:            m.nota                             є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      5                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m0zzs     &&  m.nota VALID
#REGION 1
SELE nota
IF EMPTY(m.nota)
	RETURN(.T.)
ENDIF
SET ORDER TO TAG nota
SEEK STR(wp_empresa,3)+STR(m.nota,7)
RETURN(UPtratachv())




*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M0ZZT           m.data VALID                       є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   55   є
*       є Variable:            m.data                             є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      6                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m0zzt     &&  m.data VALID
#REGION 1
IF isreading AND !EMPTY(m.data)
	SELE nota
	SET ORDER TO TAG data
	SET NEAR ON
	SEEK STR(wp_empresa,3)+DTOS(m.data)
	SET NEAR OFF
	SEEK STR(wp_empresa,3)+DTOS(nota.DATA)+STR(nota.NOTA,7)
	m.ver = 2					&& ordem data
	RETURN(UPtratachv())
ELSE
	RETURN(.T.)
ENDIF


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M0ZZU           m.nome VALID                       є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   61   є
*       є Variable:            m.nome                             є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      7                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m0zzu     &&  m.nome VALID
#REGION 1
IF isreading AND !EMPTY(m.nome)
	SELE nota
	SET ORDER TO TAG nome
	SET NEAR ON
	SEEK STR(wp_empresa,3)+LEFT(m.nome,40)
	SET NEAR OFF
	SEEK STR(wp_empresa,3)+LEFT(nota.nome,40)
	m.ver = 3					&& ordem nome
	RETURN(UPtratachv())
ELSE
	RETURN(.T.)
ENDIF


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M0ZZV           m.uf VALID                         є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   62   є
*       є Variable:            m.uf                               є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      8                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m0zzv     &&  m.uf VALID
#REGION 1
IF LASTKEY() = 27 OR LASTKEY() = 15
	RETURN .T.
ENDIF	

IF LASTKEY() = 9
	=W_DEFPROC("ESTADOS.SPR")
	m.uf = UFView(m.uf)
    SELECT nota
    IF LASTKEY() = 27
	   RETURN .F.
   ENDIF
ELSE
	=W_DEFPROC("ESTADOS.SPR")
	IF !UFVld_Estado(m.uf)
   		SELECT nota
		RETURN .F.
	ENDIF
ENDIF
SELECT nota
SHOW GET m.uf

RETURN .T.


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1013           m.cidade VALID                     є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   63   є
*       є Variable:            m.cidade                           є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      9                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m1013     &&  m.cidade VALID
#REGION 1
IF LASTKEY() = 27 OR LASTKEY() = 15
	RETURN .T.
ENDIF	

IF LASTKEY() = 9
	=W_DEFPROC("MUNICPIO.SPR")
	m.cidade = MNView(m.uf,m.cidade)
    SELECT nota
    IF LASTKEY() = 27
	   RETURN .F.
   ENDIF
ELSE
	=W_DEFPROC("MUNICPIO.SPR")
	IF !MNVld_Municipio(m.uf,m.cidade)
   		SELECT nota
		RETURN .F.
	ENDIF
ENDIF
=W_DEFPROC("MUNICPIO.SPR")
m.muni_ibge = MNGet_MUNI_IBGE(m.UF,m.cidade)

SHOW GET m.muni_ibge

SELECT nota
SHOW GET m.uf
SHOW GET m.cidade

RETURN .T.


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1014           item_btn VALID                     є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202,     Record Number:   88   є
*       є Variable:            item_btn                           є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      10                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m1014     &&  item_btn VALID
#REGION 1
DO ULitens
SELECT nota
SCATTER MEMVAR MEMO
SHOW GETS
DO refresh
RETURN



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1015           SCGC200 WHEN                       є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202A,     Record Number:    3  є
*       є Variable:            SCGC200                            є
*       є Called By:           WHEN Clause                        є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      11                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

FUNCTION _4bw0m1015     &&  SCGC200 WHEN
#REGION 2
RETURN(!ISEDITING)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1016           SCGC200 VALID                      є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202A,     Record Number:    3  є
*       є Variable:            SCGC200                            є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      12                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m1016     &&  SCGC200 VALID
#REGION 2
		  	   HIDE WINDOW SCGC202B


		  	   ACTIVATE WINDOW SCGC202
*** 			   _CUROBJ = OBJNUM(SCGC202)
		  	   SHOW WINDOW SCGC202 TOP

			   LSTelaAtiva = "SCGC202"
RETURN(.T.)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1017           SCGC200B WHEN                      є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202A,     Record Number:    5  є
*       є Variable:            SCGC200B                           є
*       є Called By:           WHEN Clause                        є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      13                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m1017     &&  SCGC200B WHEN
#REGION 2
RETURN(!ISEDITING)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1018           SCGC200B VALID                     є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202A,     Record Number:    5  є
*       є Variable:            SCGC200B                           є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      14                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m1018     &&  SCGC200B VALID
#REGION 2
		  	   HIDE WINDOW SCGC202


		  	   ACTIVATE WINDOW SCGC202B
** 			   _CUROBJ = OBJNUM(SCGC202B)
		  	   SHOW WINDOW SCGC202B TOP

			   LSTelaAtiva = "SCGC202B"

RETURN(.T.)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1019           SCGC200C WHEN                      є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202A,     Record Number:   10  є
*       є Variable:            SCGC200C                           є
*       є Called By:           WHEN Clause                        є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      15                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m1019     &&  SCGC200C WHEN
#REGION 2
RETURN(!ISEDITING)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M101A           SCGC200C VALID                     є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202A,     Record Number:   10  є
*       є Variable:            SCGC200C                           є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      16                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m101a     &&  SCGC200C VALID
#REGION 2
		  	   HIDE WINDOW SCGC202


		  	   ACTIVATE WINDOW SCGC202C
		  	   SHOW WINDOW SCGC202C TOP

			   LSTelaAtiva = "SCGC202C"

RETURN(.T.)


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M102N           m.nome VALID                       є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   33  є
*       є Variable:            m.nome                             є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      17                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m102n     &&  m.nome VALID
#REGION 3
IF isreading AND !EMPTY(m.nome)
	SELE nota
	SET ORDER TO TAG nome
	SET NEAR ON
	SEEK STR(wp_empresa,3)+LEFT(m.nome,40)
	SET NEAR OFF
	SEEK STR(wp_empresa,3)+LEFT(nota.nome,40)
	m.ver = 3					&& ordem nome
	RETURN(UPtratachv())
ELSE
	RETURN(.T.)
ENDIF


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M102O           m.natu_cli VALID                   є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   34  є
*       є Variable:            m.natu_cli                         є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      18                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m102o     &&  m.natu_cli VALID
#REGION 3
LSdbant = ALIAS()
SELECT tab001
SET ORDER TO TAG codigo

IF LASTKEY() = 9
   SEEK 'NTZ'+CHRTRAN(STR(m.natu_cli,1)," ","0")
   ON KEY LABEL ESCAPE
   DO loc_dlog WITH .t.,.F.,"'NTZ'"
   ON KEY LABEL ESCAPE KEYBOARD "{BACKTAB}"
	SELECT &LSdbant
   IF LASTKEY() = 27
	   RETURN .F.
   ENDIF
ELSE
   IF !SEEK('NTZ'+CHRTRAN(STR(m.natu_cli,1)," ","0"))
		SELECT &LSdbant
		RETURN .F.
   ENDIF
ENDIF
SELECT &LSdbant
m.natu_cli  = INT(VAL(tab001.codigo))
m.nome_natu = tab001.descricao

SHOW GET m.natu_cli
SHOW GET m.nome_natu

IF m.natu_cli =  1
	m.revendedor = "S"
ELSE
	m.revendedor = "N"
ENDIF	

RETURN .T.


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M102P           m.uf VALID                         є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   38  є
*       є Variable:            m.uf                               є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      19                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m102p     &&  m.uf VALID
#REGION 3
IF LASTKEY() = 27 OR LASTKEY() = 15
	RETURN .T.
ENDIF	

IF LASTKEY() = 9
	=W_DEFPROC("ESTADOS.SPR")
	m.uf = UFView(m.uf)
    SELECT nota
    IF LASTKEY() = 27
	   RETURN .F.
   ENDIF
ELSE
	=W_DEFPROC("ESTADOS.SPR")
	IF !UFVld_Estado(m.uf)
   		SELECT nota
		RETURN .F.
	ENDIF
ENDIF
SELECT nota
SHOW GET m.uf

RETURN .T.


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M102Q           m.cidade VALID                     є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   39  є
*       є Variable:            m.cidade                           є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      20                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m102q     &&  m.cidade VALID
#REGION 3
IF LASTKEY() = 27 OR LASTKEY() = 15
	RETURN .T.
ENDIF	

IF LASTKEY() = 9
	=W_DEFPROC("MUNICPIO.SPR")
	m.cidade = MNView(m.uf,m.cidade)
    SELECT nota
    IF LASTKEY() = 27
	   RETURN .F.
   ENDIF
ELSE
	=W_DEFPROC("MUNICPIO.SPR")
	IF !MNVld_Municipio(m.uf,m.cidade)
   		SELECT nota
		RETURN .F.
	ENDIF
ENDIF
=W_DEFPROC("MUNICPIO.SPR")
m.muni_ibge = MNGet_MUNI_IBGE(m.UF,m.cidade)

SHOW GET m.muni_ibge

SELECT nota
SHOW GET m.uf
SHOW GET m.cidade

RETURN .T.


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M102R           m.bairro VALID                     є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   41  є
*       є Variable:            m.bairro                           є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      21                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m102r     &&  m.bairro VALID
#REGION 3
IF LASTKEY() = 27 OR LASTKEY() = 15
	RETURN .T.
ENDIF	

IF LASTKEY() = 13 AND EMPTY(m.bairro)
	RETURN .T.
ENDIF	

IF LASTKEY() = 9
	=W_DEFPROC("BAIRROS.SPR")
	m.bairro = BRView(m.uf,m.cidade,m.bairro)
    SELECT nota
    IF LASTKEY() = 27
	   RETURN .F.
   ENDIF
ELSE
	=W_DEFPROC("BAIRROS.SPR")
	IF !BRVld_Bairro(m.uf,m.cidade,m.bairro)
   		SELECT nota
		DO OBJ_MENS.SPR WITH ;
		"Bairro nao Cadastrado <ENTER> (use TAB para Listar Bairros)"
		RETURN .t.
	ENDIF
ENDIF
SELECT nota
SHOW GET m.uf
SHOW GET m.cidade
SHOW GET m.bairro

RETURN .T.


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M102S           m.cep VALID                        є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   42  є
*       є Variable:            m.cep                              є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      22                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m102s     &&  m.cep VALID
#REGION 3
IF LASTKEY() = 27 OR LASTKEY() = 15
	RETURN .T.
ENDIF	


IF LASTKEY() = 9
	=W_DEFPROC("CEP.SPR")
	m.cep = CPView(m.uf,m.cidade,m.bairro)
    SELECT nota
    IF LASTKEY() = 27
	   RETURN .F.
   ENDIF
ENDIF
IF !EMPTY(m.cep)
	=W_DEFPROC("CEP.SPR")
	IF CPVld_CEP(M.CEP)
		=W_DEFPROC("CEP.SPR")
		m.bairro = CPgetBairro(M.CEP,m.bairro)

		=W_DEFPROC("CEP.SPR")
		m.uf = CPgetEstado(M.CEP,m.uf)

		=W_DEFPROC("CEP.SPR")
		m.cidade = CPgetMunicipio(M.CEP,m.cidade)
	ELSE
		SELECT nota
		DO OBJ_MENS.SPR WITH ;
		"CEP nao Cadastrado  (Certifique-se.)"
		RETURN .t.
	ENDIF
ENDIF


SHOW GET m.bairro
SHOW GET m.uf
SHOW GET m.cidade

SELECT nota
SHOW GET m.CEP

RETURN .T.


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M102T           m.operador VALID                   є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   53  є
*       є Variable:            m.operador                         є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      23                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m102t     &&  m.operador VALID
#REGION 3
SELE USUARIO
SET ORDER TO TAG usuario
IF !SEEK(m.operador)
   return .f.
endif
m.nomevend = usuario.nome
SHOW GET m.nomevend
RETURN .T.


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M102U           m.usr_libera VALID                 є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   55  є
*       є Variable:            m.usr_libera                       є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      24                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m102u     &&  m.usr_libera VALID
#REGION 3
SELE USUARIO
SET ORDER TO TAG usuario
IF !SEEK(m.usr_libera)
   return .f.
endif
m.nomeusr = usuario.nome
SHOW GET m.nomeusr
RETURN .T.


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M102V           dup_btn VALID                      є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   57  є
*       є Variable:            dup_btn                            є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      25                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m102v     &&  dup_btn VALID
#REGION 3
m.cliente = m.favorecido
HIDE WINDOW ALL
do obj_fina.spr with 	m.cliente, m.nota
SELECT nota

SCATTER MEMVAR MEMO
SHOW WINDOW NAVEGA,SCGC202B,SCGC202,SCGC202A TOP
UNLOCK ALL
ON KEY LABEL ESCAPE
=BTN_VAL1('ATUALIZAR', VLleitura, Vlcompara)
RETURN

			


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1046           refer_btn VALID                    є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   58  є
*       є Variable:            refer_btn                          є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      26                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m1046     &&  refer_btn VALID
#REGION 3
m.cliente = m.favorecido
HIDE WINDOW ALL
=W_DEFPROC("NOTA.SPR")
=NFConjNfRef(Nota.empresa,nota.referencia)

SELECT nota

SCATTER MEMVAR MEMO
    SHOW WINDOW NAVEGA,SCGC202B,SCGC202,SCGC202A TOP
UNLOCK ALL
ON KEY LABEL ESCAPE
=BTN_VAL1('ATUALIZAR', VLleitura, Vlcompara)
RETURN

			


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1047           blt_btn VALID                      є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   59  є
*       є Variable:            blt_btn                            є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      27                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m1047     &&  blt_btn VALID
#REGION 3
    m.cliente = m.favorecido

    A = "TESTE"
    IF  A <> "TESTE"
		*---------------------------------------------------------*
		=W_DEFPROC("DUPLICAT.SPR")
		=CRGeraBoleto(nota.empresa,nota.nota)
		*---------------------------------------------------------*
	ELSE
		=W_DEFPROC("DUPLICAT.SPR")
		=CRBltTxtDevmedia(nota.empresa,nota.nota)
    ENDIF


	SELECT nota

	SCATTER MEMVAR MEMO
    SHOW WINDOW NAVEGA,SCGC202B,SCGC202,SCGC202A TOP
	UNLOCK ALL
	ON KEY LABEL ESCAPE
	=BTN_VAL1('ATUALIZAR', VLleitura, Vlcompara)
RETURN

			


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1048           prtcpsrvc VALID                    є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   60  є
*       є Variable:            prtcpsrvc                          є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      28                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _4bw0m1048     &&  prtcpsrvc VALID
#REGION 3
	if nUsr <> 1	   && Usuario de Manutencao (SISTEMA)
		RETURN
	ENDIF

	m.cliente = m.favorecido

	
	*---------------------------------------------------------*
	=W_DEFPROC("NOTA.SPR")
	=NFPrtCpSrvico(nota.empresa,"COPIA EM NF SERVICO",nota.nota)
	*---------------------------------------------------------*

	SELECT nota

	SCATTER MEMVAR MEMO
    SHOW WINDOW NAVEGA,SCGC202B,SCGC202,SCGC202A TOP
	UNLOCK ALL
	ON KEY LABEL ESCAPE
	=BTN_VAL1('ATUALIZAR', VLleitura, Vlcompara)
RETURN

			


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M1049           m.ReenvDFis VALID                  є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   61  є
*       є Variable:            m.ReenvDFis                        є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      29                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

FUNCTION _4bw0m1049     &&  m.ReenvDFis VALID
#REGION 3
	=W_DEFPROC("NOTA.SPR")

	=NFEscriturar()
    SHOW WINDOW NAVEGA,SCGC202B,SCGC202,SCGC202A TOP
RETURN



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _4BW0M104A           m.geradupl VALID                   є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCGC202B,     Record Number:   62  є
*       є Variable:            m.geradupl                         є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      30                                 є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

FUNCTION _4bw0m104a     &&  m.geradupl VALID
#REGION 3
	=W_DEFPROC("OBJ_ECF3.SPR")

    DO LCgeradupl

    SHOW WINDOW NAVEGA,SCGC202B,SCGC202,SCGC202A TOP
RETURN

