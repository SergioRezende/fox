*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є 01/06/2001            SCX0115.SPR              11:16:39 є
*       є                                                         є
*       ЗДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД¶
*       є                                                         є
*       є Author's Name                                           є
*       є                                                         є
*       є Copyright (c) 2001 Company Name                         є
*       є Address                                                 є
*       є City,     Zip                                           є
*       є                                                         є
*       є Description:                                            є
*       є This program was automatically generated by GENSCRN.    є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ

PARAMETERS lnloja,ldcaixa,lnoperador

*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є          SCX0115/MS-DOS Setup Code - SECTION 1          є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1

	*---------------------------------------------------------------------*
	*
	* OBJETIVOS : Operacao de Caixa
	*
	*---------------------------------------------------------------------*

	=W_DEFPROC("rotinas.spr")
	CLEAR TYPEAHEAD
	PUSH KEY CLEAR		&& desabilita teclas de atalho def. anteriormente
	ON KEY LABEL F1		DO HLP2000.SPR WITH  POPUP(),PROMPT(),PROGRAM(),;
							WONTOP(),VARREAD()


	*------------------------------------------------------------*
	PRIVATE LFestagio			&& 1 = Aguarda Abertura Lancamento
								&& 2 = Aguarda Encerramento do Lancamento

	PRIVATE LSalias

	PRIVATE LFempresa,LFcxdiario,LFcxoperad,LFfuncionario
	PRIVATE LFpar_caix

	PRIVATE LFcp_rcbca,LFdocRCBcX,LFpln_Cont

	PRIVATE LFduplicat,LFnotaent,LFfornece

	
	*------------------------------------------------------------*

	LSalias		= ALIAS()

	LFempresa		= NetArq("empresa")
	LFcxdiario		= NetArq("cxdiario")
	LFcxoperador	= NetArq("cxoperad")
	LFfuncionario	= NetArq("funciona")
	LFfuncionario	= NetArq("funciona")
	LFpar_caix		= NetArq("par_caix")

	LFcp_rcbca		= NetArq("cp_rcbca")
	LFdocRCBcX		= NetArq("docRCBcX")
	LFpln_Cont		= NetArq("pln_Cont")


	LFduplicat		= NetArq("duplicat")
	LFnotaent		= NetArq("notaent")
	LFfornece		= NetArq("fornece")


	IF (LFempresa+LFcxdiario+LFcxoperador+LFfuncionario)  > 100000
		DO ULfecha
		RETURN(.f.)
	ENDIF	

	IF (LFpar_caix+LFcp_rcbca+LFdocRCBcX+LFpln_Cont)	> 100000
		DO ULfecha
		RETURN(.f.)
	ENDIF

	IF (LFduplicat+LFnotaent+LFfornece)  > 100000
		DO ULfecha
		RETURN(.f.)
	ENDIF	



#REGION 0
REGIONAL m.currarea, m.talkstat, m.compstat

IF SET("TALK") = "ON"
	SET TALK OFF
	m.talkstat = "ON"
ELSE
	m.talkstat = "OFF"
ENDIF
m.compstat = SET("COMPATIBLE")
SET COMPATIBLE FOXPLUS

*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є                MS-DOS Window definitions                є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

IF NOT WEXIST("scx0115") ;
	OR UPPER(WTITLE("SCX0115")) == "SCX0115.PJX" ;
	OR UPPER(WTITLE("SCX0115")) == "SCX0115.SCX" ;
	OR UPPER(WTITLE("SCX0115")) == "SCX0115.MNX" ;
	OR UPPER(WTITLE("SCX0115")) == "SCX0115.PRG" ;
	OR UPPER(WTITLE("SCX0115")) == "SCX0115.FRX" ;
	OR UPPER(WTITLE("SCX0115")) == "SCX0115.QPR"
	DEFINE WINDOW scx0115 ;
		FROM INT((SROW()-20)/2),INT((SCOL()-77)/2) ;
		TO INT((SROW()-20)/2)+19,INT((SCOL()-77)/2)+76 ;
		FLOAT ;
		NOCLOSE ;
		NOMINIMIZE ;
		NONE ;
		COLOR SCHEME 1
ENDIF


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є          SCX0115/MS-DOS Setup Code - SECTION 2          є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1

******>>>> INICIO CONTROLE LOCAL

	SELE cxdiario
	SET ORDER TO TAG prk_cxdiar
	
	LNloja		=	wp_empresa
	LDcaixa		=	wp_dtoper
	LNoperador	=	0
	LFestagio	=	1		&& 1 = Aguarda Abertura Lancamento



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є              SCX0115/MS-DOS Screen Layout               є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1
IF WVISIBLE("scx0115")
	ACTIVATE WINDOW scx0115 SAME
ELSE
	ACTIVATE WINDOW scx0115 NOSHOW
ENDIF
@ 0,0 TO 19,74 ;
	COLOR SCHEME 23
@ 19,1 TO 19,73 ;
	COLOR SCHEME 24
@ 19,74 SAY "Щ" ;
	SIZE 1,1, 0 ;
	COLOR SCHEME 24
@ 1,74 TO 18,74 ;
	COLOR SCHEME 24
@ 0,74 SAY "ї" ;
	SIZE 1,1, 0 ;
	COLOR SCHEME 24
@ 17,49 SAY "Operador" ;
	SIZE 1,8, 0
@ 17,29 SAY "Caixa" ;
	SIZE 1,5, 0
@ 17,9 SAY "Loja " ;
	SIZE 1,5, 0
@ 18,7 GET LNloja ;
	SIZE 1,4 ;
	DEFAULT 0 ;
	PICTURE "9999" ;
	WHEN .f.
@ 18,11 SAY "-" ;
	SIZE 1,1, 0
@ 18,12 GET LSsiglaLoja ;
	SIZE 1,5 ;
	DEFAULT " " ;
	WHEN .f.
@ 18,27 GET LDcaixa ;
	SIZE 1,10 ;
	DEFAULT {  /  /  } ;
	PICTURE "@D" ;
	WHEN .f.
@ 18,45 GET LNoperador ;
	SIZE 1,6 ;
	DEFAULT 0 ;
	PICTURE "999999"
@ 18,51 SAY "-" ;
	SIZE 1,1, 0
@ 18,52 GET LSnomeOperador ;
	SIZE 1,15 ;
	DEFAULT " " ;
	WHEN .f.
@ 7,20 SAY "Total a Receber" ;
	SIZE 1,15, 0
@ 8,22 GET M.TAreceber ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "999,999.99" ;
	WHEN .f.
@ 5,34 SAY "Composicao" ;
	SIZE 1,10, 0
@ 6,51 GET M.TRdinheiro ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "999,999.99" ;
	WHEN isediting AND LFestagio = 2
@ 7,51 GET M.TRcheque ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "999,999.99" ;
	WHEN isediting AND LFestagio = 2
@ 8,51 GET M.TRcartao ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "999,999.99" ;
	WHEN isediting AND LFestagio = 2
@ 9,51 GET M.TRvale ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "999,999.99" ;
	WHEN isediting AND LFestagio = 2
@ 10,51 GET M.TRdevolucao ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "999,999.99" ;
	WHEN .f.
@ 11,63 GET M.troco ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "999,999.99" ;
	WHEN .f.
@ 16,1 TO 16,73 ;
	COLOR SCHEME 24
@ 2,33 GET M.ID_LANCAMENTO ;
	SIZE 1,6 ;
	DEFAULT 0 ;
	PICTURE "999999" ;
	WHEN .f. ;
	COLOR SCHEME 24
@ 6,38 SAY "Dinheiro..:R$" ;
	SIZE 1,13, 0
@ 7,38 SAY "Cheque....:R$" ;
	SIZE 1,13, 0
@ 8,38 SAY "Cartao....:R$" ;
	SIZE 1,13, 0
@ 9,38 SAY "Vale......:R$" ;
	SIZE 1,13, 0
@ 10,38 SAY "Devolucao.:R$" ;
	SIZE 1,13, 0
@ 11,55 SAY "Troco" ;
	SIZE 1,5, 0
@ 11,61 SAY "R$" ;
	SIZE 1,2, 0
@ 0,23 SAY "[ Recebimento de Duplicatas ]" ;
	SIZE 1,29, 0
@ 0,62 SAY "[CX0115]" ;
	SIZE 1,8, 0
@ 2,50 GET M.InfoDup_BTN ;
	PICTURE "@*HN Relacionar \<Duplicatas" ;
	SIZE 1,23,1 ;
	DEFAULT 1 ;
	WHEN isediting AND LFestagio = 2 ;
	VALID _0ef0o677o()
@ 2,2 GET M.abre_BTN ;
	PICTURE "@*HN \<A-Abrir Lanc" ;
	SIZE 1,14,1 ;
	DEFAULT 1 ;
	WHEN isediting AND LFestagio = 1 ;
	VALID _0ef0o6780()
@ 5,1 TO 5,17 ;
	COLOR SCHEME 24
@ 15,26 GET M.OK_BTN ;
	PICTURE "@*HN \<Ok - Confirma Lanc " ;
	SIZE 1,21,1 ;
	DEFAULT 1 ;
	WHEN isediting AND LFestagio = 2 ;
	VALID _0ef0o678t()
@ 15,50 GET M.Canc_BTN ;
	PICTURE "@*HN \<Cancela Lancamento" ;
	SIZE 1,20,1 ;
	DEFAULT 1 ;
	WHEN isediting AND LFestagio = 2 ;
	VALID _0ef0o679b()
@ 3,2 GET M.edit_BTN ;
	PICTURE "@*HN \<E-Editar Lanc" ;
	SIZE 1,15,1 ;
	DEFAULT 1 ;
	WHEN isediting AND LFestagio = 1 ;
	VALID _0ef0o67a1()
@ 8,4 GET M.TADevReg ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "999,999.99" ;
	WHEN .f.
@ 7,1 SAY "Devol.Registrada" ;
	SIZE 1,16, 0
@ 11,4 GET M.TAchqReg ;
	SIZE 1,10 ;
	DEFAULT " " ;
	PICTURE "999,999.99" ;
	WHEN .f.
@ 3,50 GET M.InfoChq_BTN ;
	PICTURE "@*HN \<R-Relacionar Cheques" ;
	SIZE 1,22,1 ;
	DEFAULT 1 ;
	WHEN isediting AND LFestagio = 2 ;
	VALID _0ef0o67ae()
@ 1,18 TO 15,18 ;
	COLOR SCHEME 24
@ 10,2 SAY "Chq.Registrados" ;
	SIZE 1,15, 0

IF NOT WVISIBLE("scx0115")
	ACTIVATE WINDOW scx0115
ENDIF


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є     MS-DOSREAD contains clauses from SCREEN scx0115     є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

READ CYCLE MODAL ;
	ACTIVATE READACT() ;
	DEACTIVATE READDEAC() ;
	SHOW _0ef0o67ar() ;
	NOLOCK

RELEASE WINDOW scx0115

#REGION 0
IF m.talkstat = "ON"
	SET TALK ON
ENDIF
IF m.compstat = "ON"
	SET COMPATIBLE ON
ENDIF


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є               SCX0115/MS-DOS Cleanup Code               є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1
DO ULfecha
RETURN



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є   SCX0115/MS-DOS Supporting Procedures and Functions    є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*

#REGION 1
PROCEDURE ULfecha

	= UP_fecha("empresa",LFempresa)
	= UP_fecha("cxdiario",LFcxdiario)
	= UP_fecha("cxoperad",LFcxoperador)
	= UP_fecha("funciona",LFfuncionario)
	= UP_fecha("par_caix",LFpar_caix)

	= UP_fecha("cp_rcbca",LFcp_rcbca)
	= UP_fecha("docRCBcX",LFdocRCBcX)
	= UP_fecha("pln_Cont",LFpln_Cont)

	= UP_fecha("duplicat",LFduplicat)
	= UP_fecha("notaent",LFnotaent)
	= UP_fecha("fornece",LFfornece)

	IF !EMPTY(LSalias) AND USED(LSalias)
		SELECT &LSalias
	ENDIF

	ON KEY LABEL ESCAPE
	SET FORMAT TO
	************************************
	POP KEY 			&& reabilita teclas de atalho def. anteriormente
RETURN

*-------------------->>>>>>>>>


FUNCTION ULrefresh
PARAMETERS LFestagio
    IF LFestagio = 1
		SHOW GET M.abre_BTN 	ENABLE
		SHOW GET M.edit_BTN 	ENABLE
		SHOW GET M.InfoDup_BTN  DISABLE
		SHOW GET M.TRdinheiro  	DISABLE
    	SHOW GET M.TRcheque  	DISABLE
    	SHOW GET M.TRcartao 	DISABLE
    	SHOW GET M.TRvale	  	DISABLE
    	SHOW GET M.TRdevolucao  DISABLE
    	SHOW GET m.OK_BTN		DISABLE
    	SHOW GET M.Canc_BTN	  	DISABLE
	ELSE
		SHOW GET M.abre_BTN 	DISABLE
		SHOW GET M.edit_BTN 	DISABLE
		SHOW GET M.InfoDup_BTN  ENABLE
		SHOW GET M.TRdinheiro  	ENABLE
    	SHOW GET M.TRcheque  	ENABLE
    	SHOW GET M.TRcartao 	ENABLE
    	SHOW GET M.TRvale	  	ENABLE
    	SHOW GET M.TRdevolucao  ENABLE

		IF M.TADevReg <> M.TRdevolucao OR ;
		   M.TAchqReg <> M.TRcheque
	    	SHOW GET m.OK_BTN		DISABLE
		ELSE
		   	SHOW GET m.OK_BTN		ENABLE
		ENDIF
    	SHOW GET M.Canc_BTN	  	ENABLE
    ENDIF
RETURN


FUNCTION ULOutrRefresh
PARAMETERS LNloja, LNoperador

	SELE empresa
	SET ORDER TO  TAG empresa
	SEEK LNloja
	LSsiglaLoja	= empresa.sigla
	SHOW GET LSsiglaLoja

	SELE funciona
	SET ORDER TO TAG prk_funcio

	SEEK LNoperador
	LSnomeOperador	 = funciona.nome
	SHOW GET LSnomeOperador
RETURN




*-------------------------------------------------------------------*

PROCEDURE ULsaveScreen
	
*	PUBLIC VLwinCX100
	
*	ACTIVATE WINDOW SCX0100
*	SAVE SCREEN TO VLwinCX100

	HIDE WINDOW SCX0100
RETURN

PROCEDURE ULrestScreen

	*SHOW WINDOW SCX0100
*	RESTORE SCREEN FROM VLwinCX100

	ACTIVATE WINDOWS SCX0100

*	RELEASE  VLwinCX100

RETURN


*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _0EF0O677O           M.InfoDup_BTN VALID                є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCX0115,     Record Number:   37   є
*       є Variable:            M.InfoDup_BTN                      є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      1                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _0ef0o677o     &&  M.InfoDup_BTN VALID
#REGION 1
	DO SCX0116.SPR WITH LNloja,LDcaixa,LNoperador,;
				LNlancamento,m.TAreceber,M.TADevReg

	SHOW GET m.TAreceber
	SHOW GET m.TADevReg


	DO ULrefresh WITH 	LFestagio	

RETURN



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _0EF0O6780           M.abre_BTN VALID                   є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCX0115,     Record Number:   38   є
*       є Variable:            M.abre_BTN                         є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      2                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _0ef0o6780     &&  M.abre_BTN VALID
#REGION 1
	SELE PAR_CAIXA
	SET ORDER TO TAG id_empresa

	m.id_empresa	=	LNloja
	SEEK m.id_empresa
	IF !FOUND()
		m.ctr_recebd	=	1
		=EDITHAND("SAVE")
	ENDIF
	IF REGLOCK()
		M.id_lancamento	=	par_caixa.ctr_recebd
		FOR I = TO 5
			SELE cp_rcbca
			SET ORDER TO TAG PRK_CHAVE
			SEEK STR(m.id_empresa,6)+STR(m.id_lancame,6)
			IF !FOUND()
				EXIT
			ENDIF
			m.id_lancame = m.id_lancame + 1
		NEXT
		IF FOUND()
			DO OBJ_MENS.SPR WITH ;
			"    ATENCAO!!"+CHR(13)+CHR(13)+;
			"     Foi detectada Falha no Controle "+;
            "de Numeracao de Lancamentos. <Contacte Suporte>"
		ELSE				
			m.ctr_recebd	=	m.id_lancame + 1
			=EDITHAND("SAVE")
			=UNLOCK()

			SELE cp_rcbca
			m.id_empresa	=	LNloja
			m.id_data		=	LDcaixa
			m.id_funcion	=	LNoperador
			m.id_fornece	=	0
			m.id_nota		=	0
			m.id_serie		=	0
			m.flag_desco	=	.f.
			m.diheiro		=	0
			m.cheque		=	0
			m.cartao		=	0
			m.vale			=	0
			m.devolucao		=	0
			m.status		=	.t.
			=EDITHAND("SAVE")
			=REGLOCK()
			*--------   REGISTRA A MUDANCA DE ESTAGIO  ------------*

			LFestagio = 1

			*------------------------------------------------------*

		ENDIF
	ENDIF
	DO ULrefresh WITH 	LFestagio	
RETURN



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _0EF0O678T           M.OK_BTN VALID                     є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCX0115,     Record Number:   40   є
*       є Variable:            M.OK_BTN                           є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      3                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _0ef0o678t     &&  M.OK_BTN VALID
#REGION 1
	SELE cp_rcbca
	m.id_empresa	=	LNloja
	m.id_data		=	LDcaixa
	m.id_funcion	=	LNoperador

	m.id_fornece	=	0
	m.id_nota		=	0
	m.id_serie		=	0


	m.flag_desco	=	.f.

	m.diheiro		=	M.TRdinheiro
	m.cheque		=	M.TRcheque
	m.cartao		=	M.TRcartao
	m.vale			=	M.TRvale
	m.devolucao		=	M.TRdevolucao

	IF M.troco > 0 AND (m.cheque > 0 OR m.cartao > 0)
		m.flag_desco	=	.t.
	ENDIF
	=EDITHAND("REGRAVA")
	UNLOCK

	LFestagio = 1
	DO ULrefresh WITH 	LFestagio	
RETURN



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _0EF0O679B           M.Canc_BTN VALID                   є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCX0115,     Record Number:   41   є
*       є Variable:            M.Canc_BTN                         є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      4                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
	*---------------------------------------------------------*
	*   Cancelando Documentos Relacionados                    *
	*---------------------------------------------------------*
	*         Cancelando Duplicatas                           *
	*---------------------------------------------------------*
FUNCTION _0ef0o679b     &&  M.Canc_BTN VALID
#REGION 1
	ID_LANCAMEN		=	LNlancamento
	ID_EMPRESA 		=	LNloja

	SELE docRCBcX
	SET ORDER TO TAG PRK_CHAVE
	
	SET NEAR ON
	SEEK STR(m.ID_EMPRESA,6)+STR(m.ID_LANCAME,6)
	SET NEAR OFF
	DO WHILE !EOF() ;
				AND LNloja = docRCBcX.id_empresa  ;
   	     		AND LNlancamento = docRCBcX.ID_LANCAME
		=EDITHAND("APAGA")
		SKIP
	ENDDO
	*---------------------------------------------------------*
	*         Cancelando Cheques                              *
	*---------------------------------------------------------*


	*---------------------------------------------------------*
	SELE cp_rcbca
	m.status		=	.F.        && CNCELANDO LANCAMENTO
	*---------------------------------------------------------*



	***************************
	SET FIELDS TO dtregis, hregis, usrregis,deletado
    SET FIELDS TO status
	=edithand('REGRAVA')
	CLEAR FIELDS
	SET FIELDS OFF
	***************************
	UNLOCK

	LFestagio = 1
	DO ULrefresh WITH 	LFestagio	
RETURN











	LFestagio = 1
	DO ULrefresh WITH 	LFestagio	
return

*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _0EF0O67A1           M.edit_BTN VALID                   є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCX0115,     Record Number:   42   є
*       є Variable:            M.edit_BTN                         є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      5                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _0ef0o67a1     &&  M.edit_BTN VALID
#REGION 1
	LFestagio = 2
	DO ULrefresh WITH 	LFestagio	
RETURN



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _0EF0O67AE           M.InfoChq_BTN VALID                є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCX0115,     Record Number:   46   є
*       є Variable:            M.InfoChq_BTN                      є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Push Button                        є
*       є Snippet Number:      6                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _0ef0o67ae     &&  M.InfoChq_BTN VALID
#REGION 1
	DO SCX0117.SPR WITH LNloja,LDcaixa,LNoperador,;
				LNlancamento,TAreceber,M.TAchqReg

	SHOW GET M.TAchqReg

	DO ULrefresh WITH 	LFestagio	

RETURN



*       ЦДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД·
*       є                                                         є
*       є _0EF0O67AR           Read Level Show                    є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є                                                         є
*       є From Platform:       MS-DOS                             є
*       є From Screen:         SCX0115                            є
*       є Called By:           READ Statement                     є
*       є Snippet Number:      7                                  є
*       є                                                         є
*       УДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЅ
*
FUNCTION _0ef0o67ar     && Read Level Show
PRIVATE currwind
STORE WOUTPUT() TO currwind
*
* Show Code from screen: SCX0115
*
#REGION 1
	DO ULrefresh 		WITH LFestagio	
	DO ULOutrRefresh 	WITH LNloja, LNoperador
RETURN



IF NOT EMPTY(currwind)
	ACTIVATE WINDOW (currwind) SAME
ENDIF